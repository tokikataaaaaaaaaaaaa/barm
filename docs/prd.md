# BARM PRD（要件定義書）

**バージョン:** 1.0
**作成日:** 2026-01-02
**ステータス:** Draft

---

## 1. プロダクト概要

### 1.1 プロダクト名
BARM (Be-a-real-man)

### 1.2 ビジョン
男としての体づくりと勉強を、仲間と共にやりきる習慣をつくる

### 1.3 コアバリュー
「一人じゃ続かない。だから、男5人で変わる。」

### 1.4 ターゲットユーザー
- **Primary:** 20〜30代社会人男性（筋トレ・勉強を続けたいが一人だと続かない）
- **Secondary:** 10代学生男性（部活・受験勉強の両立）

---

## 2. 機能要件

### 2.1 Must-have（MVP必須）

#### F-001: ユーザー認証
**ユーザーストーリー:**
> ユーザーとして、Apple IDでログインしたい。個人情報入力の手間を省くため。

**受け入れ基準:**
- [ ] Apple Sign Inでログインできる
- [ ] 初回ログイン時にニックネームを設定できる
- [ ] ログイン状態が永続化される（再起動後もログイン維持）
- [ ] ログアウトできる

---

#### F-002: ミッション設定
**ユーザーストーリー:**
> ユーザーとして、自分だけのミッション（目標）を設定したい。毎日の達成を記録するため。

**受け入れ基準:**
- [ ] 新しいミッションを作成できる
- [ ] ミッション名を自由に設定できる（例: 腕立て伏せ、英語リーディング）
- [ ] 目標値と単位を設定できる（例: 50回、30分、10ページ）
- [ ] ミッションのタイプを選択できる（筋トレ / 勉強）
- [ ] ミッション一覧を表示できる
- [ ] ミッションを編集・削除できる
- [ ] 最大10個までミッションを作成できる

---

#### F-003: 記録トラッキング
**ユーザーストーリー:**
> ユーザーとして、今日の達成を記録したい。進捗を可視化するため。

**受け入れ基準:**
- [ ] ミッションごとに今日の達成値を入力できる
- [ ] 記録は日付ごとに保存される
- [ ] 過去の記録を閲覧できる（カレンダー or リスト形式）
- [ ] 目標達成率（達成値/目標値）を表示できる
- [ ] 連続達成日数（ストリーク）を表示できる

---

#### F-004: グループ作成・参加
**ユーザーストーリー:**
> ユーザーとして、仲間とグループを作りたい。お互いの記録を見てモチベーションを維持するため。

**受け入れ基準:**
- [ ] 新しいグループを作成できる
- [ ] グループ名を設定できる
- [ ] 招待コード（6桁英数字）が自動生成される
- [ ] 招待コードでグループに参加できる
- [ ] 1グループあたり最大5人まで
- [ ] 1ユーザーは1グループのみ所属可能（MVP）
- [ ] グループから退出できる
- [ ] グループオーナーはグループを削除できる

---

#### F-005: 仲間の記録閲覧
**ユーザーストーリー:**
> ユーザーとして、グループメンバーの今日の記録を見たい。刺激を受けてモチベーションを上げるため。

**受け入れ基準:**
- [ ] グループメンバー一覧を表示できる
- [ ] 各メンバーの今日の達成状況を確認できる
- [ ] 各メンバーのストリーク（連続達成日数）を確認できる
- [ ] メンバーの記録はリアルタイムで更新される（または手動リフレッシュ）

---

#### F-006: サブスクリプション課金
**ユーザーストーリー:**
> ユーザーとして、月額課金でプレミアム機能を使いたい。継続のモチベーションも兼ねて。

**受け入れ基準:**
- [ ] 月額300円のサブスクリプションを購入できる
- [ ] 目標達成時、翌月は100円になる（達成割引）
- [ ] 課金状態に応じてアプリ内表示が変わる
- [ ] サブスクリプションをキャンセルできる
- [ ] App Store経由で課金処理される（RevenueCat使用）
- [ ] 課金なしでも基本機能は使える（無料プラン: グループ機能なし）

**無料プラン制限:**
- ミッション設定・記録は可能
- グループ機能は使用不可
- 仲間の記録閲覧は不可

---

### 2.2 Should-have（余裕があれば）

#### F-007: 勉強種目の追加
**ユーザーストーリー:**
> ユーザーとして、勉強のミッションも設定したい。筋トレだけでなく自己研鑽全般を管理するため。

**受け入れ基準:**
- [ ] ミッションタイプ「勉強」を選択できる
- [ ] 勉強向けテンプレート（英語、資格、読書など）が用意されている

---

#### F-008: ミッション提案
**ユーザーストーリー:**
> ユーザーとして、おすすめのミッションを提案してほしい。何を設定すべきか迷うため。

**受け入れ基準:**
- [ ] デフォルトのミッションテンプレートが用意されている
- [ ] テンプレートから選んでミッションを作成できる

---

#### F-009: プッシュ通知
**ユーザーストーリー:**
> ユーザーとして、毎日決まった時間にリマインダーがほしい。記録を忘れないため。

**受け入れ基準:**
- [ ] プッシュ通知の許可を求める
- [ ] リマインダー時刻を設定できる
- [ ] 設定時刻に通知が届く
- [ ] 通知をタップするとアプリが開く

---

### 2.3 Won't-have（明確に除外）

| 機能 | 除外理由 |
|------|----------|
| 動画コンテンツ | 開発コスト高、ストレージコスト増 |
| AIトレーナー | 複雑すぎる、コア価値に不要 |
| Android版 | iOS先行でMVP検証を優先 |
| 女性向け機能 | ターゲット外、ブランディングを維持 |
| SNS連携 | MVPではコア機能に集中 |

---

## 3. 非機能要件

### 3.1 パフォーマンス

| 項目 | 基準 |
|------|------|
| アプリ起動時間 | 3秒以内（コールドスタート） |
| 画面遷移 | 0.5秒以内 |
| データ同期 | 5秒以内（仲間の記録更新） |
| オフライン対応 | 記録入力はオフラインでも可能（後で同期） |

### 3.2 セキュリティ

| 項目 | 要件 |
|------|------|
| 認証 | Apple Sign In（OAuth 2.0） |
| データ保護 | Firestoreセキュリティルールで自分のデータのみ編集可能 |
| グループ分離 | 他グループのデータは参照不可 |
| 課金情報 | RevenueCat経由、アプリ内には保存しない |

### 3.3 運用

| 項目 | 要件 |
|------|------|
| クラッシュレポート | Firebase Crashlytics で収集 |
| Analytics | Firebase Analytics でイベント計測 |
| ログ | 重要操作はFirestore Function Logsに記録 |

### 3.4 UX

| 項目 | 要件 |
|------|------|
| デザインシステム | Material Design 3 ベース |
| ダークモード | システム設定に追従 |
| アクセシビリティ | VoiceOver対応（基本レベル） |

---

## 4. 画面一覧

| 画面ID | 画面名 | 主要機能 |
|--------|--------|----------|
| S-001 | スプラッシュ | アプリ起動時のロード画面 |
| S-002 | ログイン | Apple Sign Inボタン |
| S-003 | ニックネーム設定 | 初回ログイン時 |
| S-004 | ホーム | 今日のミッション一覧、達成入力 |
| S-005 | ミッション作成 | 新規ミッション作成フォーム |
| S-006 | ミッション詳細 | 過去の記録、編集・削除 |
| S-007 | グループ | メンバー一覧、今日の達成状況 |
| S-008 | グループ作成 | グループ名入力、招待コード表示 |
| S-009 | グループ参加 | 招待コード入力 |
| S-010 | 設定 | プロフィール、通知、課金、ログアウト |
| S-011 | 課金 | プラン説明、購入ボタン |

---

## 5. 用語集

| 用語 | 定義 |
|------|------|
| ミッション | ユーザーが設定する目標（例: 腕立て50回/日） |
| 記録 | ミッションに対するその日の達成値 |
| ストリーク | 連続して目標を達成した日数 |
| グループ | 最大5人の少人数チーム |
| 招待コード | グループへの参加に使う6桁の英数字 |
| 達成割引 | 月間目標達成時、翌月の課金が100円になる仕組み |

---

## 6. 成功指標

| 指標 | ベータ目標 | ローンチ3ヶ月目標 |
|------|-----------|------------------|
| 継続率（7日） | 50% | 40% |
| 継続率（30日） | 30% | 25% |
| 課金転換率 | 10% | 5% |
| グループ作成率 | 60% | 50% |
| NPS | +30 | +20 |

---

## 7. 技術スタック（参照）

詳細は `strategy-results/barm.md` を参照

```
Frontend:  Flutter + Riverpod
Backend:   Firebase（Firestore + Auth + FCM）
Payment:   RevenueCat + App Store IAP
Analytics: Firebase Analytics + Crashlytics
```

---

## 変更履歴

| バージョン | 日付 | 変更内容 |
|-----------|------|----------|
| 1.0 | 2026-01-02 | 初版作成 |
